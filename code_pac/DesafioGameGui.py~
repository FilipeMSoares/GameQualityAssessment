
import wx
import wx.grid
import dataBaseAdapter
from code_pac.desafio.model import  Tournament

# begin wxGlade: dependencies
import gettext
# end wxGlade

# begin wxGlade: extracode
# end wxGlade


class GUIDesafioGame(wx.Frame):
    def __init__(self, *args, **kwds):
        # begin wxGlade: GUIDesafioGameView.__init__
        kwds["style"] = wx.DEFAULT_FRAME_STYLE
        wx.Frame.__init__(self, *args, **kwds)
        self.label_1 = wx.StaticText(self, wx.ID_ANY, _("Tournament"))
        self.lstTournament = wx.ListBox(self, wx.ID_ANY)
        self.label_2 = wx.StaticText(self, wx.ID_ANY, _("Series"))
        self.lstSeries = wx.ListBox(self, wx.ID_ANY, choices=[_("exemplo1"), _("outro")], style=wx.LB_SINGLE)
        self.label_3 = wx.StaticText(self, wx.ID_ANY, _("Game"))
        self.lstGame = wx.ListBox(self, wx.ID_ANY, choices=[_("exemplo"), _("exemplo2"), ""], style=wx.LB_SINGLE)
        self.gridPointsRows = wx.grid.Grid(self, wx.ID_ANY, size=(1, 1))
        self.label_4 = wx.StaticText(self, wx.ID_ANY, _("Assessment"))
        self.lstAssessment = wx.ListCtrl(self, wx.ID_ANY, style=wx.LC_REPORT | wx.SUNKEN_BORDER)
        self.label_5 = wx.StaticText(self, wx.ID_ANY, _("Overall evaluation"))
        self.txtOverall = wx.TextCtrl(self, wx.ID_ANY, "")
        self.label_6 = wx.StaticText(self, wx.ID_ANY, _("History by Points"))
        #self.window_1 = CustomWidget(self, wx.ID_ANY)
        self.label_7 = wx.StaticText(self, wx.ID_ANY, _("History by Position"))
        #self.window_2 = CustomWidget(self, wx.ID_ANY)
        
        self.Bind(wx.EVT_LISTBOX, self._onLstTournament, self.lstTournament)
        
        self.__set_properties()
        self.__do_layout()
        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: GUIDesafioGameView.__set_properties
        self.SetTitle(_("Desafio Game View"))
        #self.lstTournament.SetSelection(0)
        self.lstSeries.SetSelection(0)
        self.lstGame.SetSelection(1)
        self.gridPointsRows.CreateGrid(37, 9)
        self.gridPointsRows.EnableEditing(0)
        self.gridPointsRows.EnableDragRowSize(0)
        self.gridPointsRows.SetSelectionMode(wx.grid.Grid.wxGridSelectRows)
        self.gridPointsRows.SetColSize(0, 10)
        self.gridPointsRows.SetColSize(1, 10)
        self.gridPointsRows.SetColSize(2, 10)
        self.gridPointsRows.SetColSize(3, 10)
        self.gridPointsRows.SetColSize(4, 10)
        self.gridPointsRows.SetColSize(5, 10)
        self.gridPointsRows.SetColSize(6, 10)
        self.gridPointsRows.SetColSize(7, 10)
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: GUIDesafioGameView.__do_layout
        sizer_7 = wx.BoxSizer(wx.VERTICAL)
        sizer_16 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_18 = wx.BoxSizer(wx.VERTICAL)
        sizer_17 = wx.BoxSizer(wx.VERTICAL)
        sizer_8 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_15 = wx.BoxSizer(wx.VERTICAL)
        sizer_9 = wx.BoxSizer(wx.VERTICAL)
        sizer_14 = wx.BoxSizer(wx.VERTICAL)
        sizer_10 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_13 = wx.BoxSizer(wx.VERTICAL)
        sizer_12 = wx.BoxSizer(wx.VERTICAL)
        sizer_11 = wx.BoxSizer(wx.VERTICAL)
        sizer_7.Add((20, 10), 0, 0, 0)
        sizer_8.Add((10, 20), 0, 0, 0)
        sizer_11.Add(self.label_1, 0, 0, 0)
        sizer_11.Add(self.lstTournament, 1, wx.EXPAND, 0)
        sizer_10.Add(sizer_11, 1, wx.EXPAND, 0)
        sizer_10.Add((20, 20), 0, 0, 0)
        sizer_12.Add(self.label_2, 0, 0, 0)
        sizer_12.Add(self.lstSeries, 1, wx.EXPAND, 0)
        sizer_10.Add(sizer_12, 1, wx.EXPAND, 0)
        sizer_10.Add((20, 20), 0, 0, 0)
        sizer_13.Add(self.label_3, 0, 0, 0)
        sizer_13.Add(self.lstGame, 1, wx.EXPAND, 0)
        sizer_10.Add(sizer_13, 1, wx.EXPAND, 0)
        sizer_9.Add(sizer_10, 1, wx.EXPAND, 0)
        sizer_14.Add((20, 20), 0, 0, 0)
        sizer_14.Add(self.gridPointsRows, 1, wx.EXPAND, 0)
        sizer_9.Add(sizer_14, 1, wx.EXPAND, 0)
        sizer_8.Add(sizer_9, 3, wx.EXPAND, 0)
        sizer_8.Add((20, 20), 0, 0, 0)
        sizer_15.Add(self.label_4, 0, 0, 0)
        sizer_15.Add(self.lstAssessment, 1, wx.EXPAND | wx.ALIGN_RIGHT, 0)
        sizer_15.Add((20, 20), 0, 0, 0)
        sizer_15.Add(self.label_5, 0, 0, 0)
        sizer_15.Add(self.txtOverall, 0, wx.EXPAND, 0)
        sizer_8.Add(sizer_15, 1, wx.EXPAND, 0)
        sizer_8.Add((10, 20), 0, 0, 0)
        sizer_7.Add(sizer_8, 1, wx.EXPAND, 0)
        sizer_7.Add((20, 20), 0, 0, 0)
        sizer_16.Add((10, 20), 0, 0, 0)
        sizer_17.Add(self.label_6, 0, 0, 0)
        #sizer_17.Add(self.window_1, 1, wx.EXPAND, 0)
        sizer_16.Add(sizer_17, 1, wx.EXPAND, 0)
        sizer_16.Add((20, 20), 0, 0, 0)
        sizer_18.Add(self.label_7, 0, 0, 0)
        #sizer_18.Add(self.window_2, 1, wx.EXPAND, 0)
        sizer_16.Add(sizer_18, 1, wx.EXPAND, 0)
        sizer_16.Add((10, 20), 0, 0, 0)
        sizer_7.Add(sizer_16, 1, wx.EXPAND, 0)
        sizer_7.Add((20, 10), 0, 0, 0)
        self.SetSizer(sizer_7)
        sizer_7.Fit(self)
        self.Layout()
        # end wxGlade
    
    def fullTournament(self):
        conn = dataBaseAdapter.getConnection()
        tournaments = sorted(Tournament.retriveList(conn), key=lambda  tournament: tournament.tournamentCode)
        
        for tournament in tournaments:
            i = len(self.lstTournament.GetItems())
            self.lstTournament.Insert(tournament.country.strip() + " - " + str(tournament.refYear), i)
            #i+=1
            print tournament.tournamentCode

    def _onLstTournament(self, event):
        print event
            
# end of class GUIDesafioGameView
if __name__ == "__main__":
    gettext.install("app") # replace with the appropriate catalog name

    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()
    desafioGUI = GUIDesafioGame(None, wx.ID_ANY, "")
    desafioGUI.fullTournament()
    desafioGUI.Update()
    app.SetTopWindow(desafioGUI)
    desafioGUI.Show()
    app.MainLoop()
